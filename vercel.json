{
  "version": 2,
  "buildCommand": "npm run build",
  "outputDirectory": "frontend/build",
  "installCommand": "npm install --legacy-peer-deps",
  "env": {
    "REACT_APP_FIREBASE_API_KEY": "@react_app_firebase_api_key",
    "REACT_APP_FIREBASE_AUTH_DOMAIN": "@react_app_firebase_auth_domain",
    "REACT_APP_FIREBASE_PROJECT_ID": "@react_app_firebase_project_id",
    "REACT_APP_FIREBASE_STORAGE_BUCKET": "@react_app_firebase_storage_bucket",
    "REACT_APP_FIREBASE_MESSAGING_SENDER_ID": "@react_app_firebase_messaging_sender_id",
    "REACT_APP_FIREBASE_APP_ID": "@react_app_firebase_app_id",
    "REACT_APP_BACKEND_URL": "@react_app_backend_url"
  },
  "functions": {
    "backend/index.js": {
      "runtime": "nodejs20.x",
      "environment": {
        "PORT": "3001",
        "FIREBASE_SERVICE_ACCOUNT_JSON": "@firebase_service_account_json",
        "JWT_SECRET": "@jwt_secret",
        "APP_URL": "@app_url",
        "CORS_ORIGINS": "@cors_origins",
        "SMTP_HOST": "@smtp_host",
        "SMTP_PORT": "@smtp_port",
        "SMTP_USERNAME": "@smtp_username",
        "SMTP_PASSWORD": "@smtp_password",
        "SMTP_FROM_EMAIL": "@smtp_from_email",
        "SMTP_FROM_NAME": "@smtp_from_name"
      }
    }
  },
  "rewrites": [
    { "source": "/api/(.*)", "destination": "/backend/index.js" },
    { "source": "/(.*)", "destination": "/index.html" }
  ]
}
